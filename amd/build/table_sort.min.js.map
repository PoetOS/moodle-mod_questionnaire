{"version":3,"sources":["../src/table_sort.js"],"names":["define","$","t","init","M","util","js_pending","on","sortcolumn","js_complete","e","preventDefault","col","index","id","closest","attr","siblings","find","hide","removeClass","removeAttr","is","addClass","sortOrder","arrData","get","sort","a","b","val1","children","eq","text","val2","dateregx","test","Date","isNumeric","each","row","tableid","append"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JavaScript library for questionnaire response table sorting.\n *\n * @module     mod_questionnaire/table_sort\n * @package    mod_questionnaire\n * @copyright\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery'], function($) {\n\n    var t = {\n        /**\n         * Initialise the event listeners.\n         *\n         */\n        init: function() {\n            M.util.js_pending('mod_questionnaire_tablesort');\n            $(\".qn-handcursor\").on('click', t.sortcolumn);\n            M.util.js_complete('mod_questionnaire_tablesort');\n        },\n\n        /**\n         * Javascript for sorting s'Text Box' Response.\n         *\n         */\n        sortcolumn: function(e) {\n            e.preventDefault();\n            var col = $(this).index();\n            var id = $(this).closest('table').attr('id');\n            $(this).siblings().find('span[class^=\"icon-container-\"]').hide();\n            $(this).siblings().removeClass('asc desc');\n            $(this).find('span[class^=\"icon-container-\"]').removeAttr('style');\n            if ($(this).is('.asc')) {\n                $(this).removeClass('asc').addClass('desc');\n                sortOrder = -1;\n            } else {\n                $(this).addClass('asc').removeClass('desc');\n                sortOrder = 1;\n            }\n            var arrData = $(this).closest('table').find('tbody >tr:has(td.cell)').get();\n            arrData.sort(function (a, b) {\n                var val1 = $(a).children('td').eq(col).text();\n                var val2 = $(b).children('td').eq(col).text();\n                // Regex to check for date sorting.\n                var dateregx = /^\\d{2}.*\\d{4},/;\n                if (dateregx.test(val1) && dateregx.test(val2)) {\n                    val1 = new Date(val1);\n                    val2 = new Date(val2);\n                    return (val1 < val2) ? -sortOrder : (val1 > val2) ? sortOrder : 0;\n                } else if ($.isNumeric(val1) && $.isNumeric(val2)) {\n                    return sortOrder == 1 ? val1 - val2 : val2 - val1;\n                } else {\n                    return (val1 < val2) ? -sortOrder : (val1 > val2) ? sortOrder : 0;\n                }\n            });\n            /* Append the sorted rows to tbody*/\n            $.each(arrData, function (index, row) {\n                tableid = $('#' + id + ' tbody');\n                tableid.append(row);\n            });\n        },\n    };\n    return t;\n});"],"file":"table_sort.min.js"}